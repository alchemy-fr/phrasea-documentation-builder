networks:
  internal:
    driver: bridge
    ipam:
      config:
        - subnet: 174.40.0.0/16

services:
  builder:
    # image: "alchemy-fr/phrasea-documentation:latest"
    build:
      context: ./
      dockerfile: ./importer/Dockerfile
      args:
        - PHRASEA_TAG=${PHRASEA_TAG}
    networks:
      - internal
    #        volumes:
    #            - ./importer/:/srv/app
    #            - ./docusaurus/phrasea/:/srv/docusaurus/phrasea
    ports:
      - "3078:3000"
    environment:
      - PHRASEA_REPO=${PHRASEA_REPO}
      - DOC_REPO=${DOC_REPO}
      - DOC_BRANCH=${DOC_BRANCH}
      - DOC_GITHUB_TOKEN=${DOC_GITHUB_TOKEN}
      - PHRASEA_TAG=${PHRASEA_TAG}
      - PHRASEA_BRANCH=${PHRASEA_BRANCH}
